# ARM常用汇编指令

### 1. 汇编格式：

```
label：instruction @ comment
```

- label：标号  (标识，类似函数名，可以用于程序跳转)
- instruction：具体汇编指令
- comment：注释内容 （@之后不参与编译）

### 2. 常用段名：

- .text：代码段

- .data：初始化的数据段

- .bss：未初始化的数据段

- .rodata：只读数据段

- .section：自定义段

  ```
  .section .vector  @自定义的段名为.vector
  ```

### 3. 常见伪操作：

- .global：定义全局标号

  ```
  .global _start
  ```

- .align：字节对齐

  ```
  .align 2
  ```


### 4. 寄存器间数据传输:

- mov：寄存器数据(或者是立即数)拷贝到另一个寄存器

  ```
  mov r0，r1      @将r1值复制给r0
  mov r0, #0x12   @将0x12复制给r0
  ```

- mrs：读程序状态寄存器（cpsr和spsr的操作都用mrs,msr)

  ```
  mrs r0,cpsr
  ```

- msr：写程序状态寄存器

  ```
  msr cpsr,r0
  ```

- mrc：读cp15协处理器

  

- mcr：写cp15寄存器



### 5. 内存与寄存器数据传输:

- ldr：把内存数据(或者是立即数)加载到寄存器

  ```
  ldr r0, =0x80000000 @不同与mov命令，用“=”做立即数赋值
  ldr r1, [r0]        @[]表示指针；从r0指向的内存地址取出数据赋值给r1
  ```

- str：把寄存器数据写入到内存

  ```
  ldr r0, =0x80000000
  str r1,[r0]				@同上一个指令方式
  ```



### 6. 压栈和出栈

- push：把寄存器列表存入栈中

  ```
  push {r0~r3, r12}   @将r0 r1 r2 r3 r12入栈
  ```

- pop：从栈中恢复寄存器列表

  ```
  pop  {r0~r3, r12}
  ```



### 7. 跳转

- b：跳转到目标地址

  ```
  b main     @不返回的跳转
  ```

- bl：跳转到目标地址，并把当前pc指针值保存在lr寄存器中

  ```
  bl main
  ```



### 8. 算术运算指令

- add：加法运算

  ```
  add r1,r2,r3   @ r2 + r3 的结果放入r1
  add r1,r2      @ r1 + r2 的结果放入r1
  
  以下算术运算指令实例一样的原理
  ```

- sub：减法运算

  ```
  sub r1,r2,r3
  ```

- mul：乘法运算

  ```
  mul r1,r2,r3
  ```

- udiv：除法运算

  ```
  udiv r1,r2,r3
  ```



### 9. 逻辑运算

- and：与

  ```
  and r1,r2,r3
  and r1,r2
  ```

- orr：或

  ```
  orr r1,r2,r3
  ```

- bic：位清除

  ```
  bic r1,r2,r3
  ```

> 注意：ARM 中的指令、伪指令、伪操作、寄存器名等可以全部使用大写，也可以全部使用 小写，但是不能大小写混用。

修改：fzxhub    来源：野火 